Alias /contas /var/www/contas

# Root directory
<Directory "/var/www/contas">
    Options -Indexes -Includes -ExecCGI
    AllowOverride None
    Require all denied

    php_value auto_prepend_file prepend.php
    php_value display_errors Off
    php_value display_startup_errors Off
    php_flag output_buffering Off

    # Allow PHP in root
    <FilesMatch "\.php$">
        Require all granted
    </FilesMatch>

    # Allow static files in root
    <FilesMatch "\.(css|js|png|jpg|jpeg|gif|svg|ico)$">
        Require all granted
    </FilesMatch>

    # Block sensitive files
    <FilesMatch "\.(json|md|log|ini|env|lock|dist|config|yaml|yml)$">
        Require all denied
    </FilesMatch>

    <FilesMatch "^composer\.(json|lock)$">
        Require all denied
    </FilesMatch>

    <FilesMatch "^\.\w+">
        Require all denied
    </FilesMatch>
</Directory>

# Allow static assets in /assets
<Directory "/var/www/contas/assets">
    Options -Indexes
    AllowOverride None
    Require all granted
</Directory>

# Allow static assets in /public
<Directory "/var/www/contas/public">
    Options -Indexes
    AllowOverride None
    Require all granted
</Directory>

# Public URL prefix
Alias /contas /var/www/contas/public

# Block entire application folder except public/
<Directory "/var/www/contas">
    Options -Indexes -Includes -ExecCGI
    AllowOverride None
    Require all denied
</Directory>

# Allow only the public document root
<Directory "/var/www/contas/public">
    Options -Indexes
    AllowOverride None
    Require all granted

    php_value display_errors Off
    php_value display_startup_errors Off
    php_flag output_buffering Off

    # Block sensitive file types inside public
    <FilesMatch "\.(ini|env|log|md|json|yml|yaml|lock|dist|config)$">
        Require all denied
    </FilesMatch>

    <FilesMatch "^composer\.(json|lock)$">
        Require all denied
    </FilesMatch>

    <FilesMatch "^\.\w+">
        Require all denied
    </FilesMatch>
</Directory>

# Public assets: only static files, no PHP execution
<Directory "/var/www/contas/public/assets">
    Options -Indexes
    AllowOverride None
    Require all granted

    <FilesMatch "\.php$">
        Require all denied
    </FilesMatch>
</Directory>
